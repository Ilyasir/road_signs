<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–î–µ—Ç–µ–∫—Ç–æ—Ä –¥–æ—Ä–æ–∂–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h1 class="text-center mb-4">üöó –î–µ—Ç–µ–∫—Ç–æ—Ä –¥–æ—Ä–æ–∂–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤</h1>
            <div class="card p-4 shadow-sm">
                <form action="/upload/" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label class="form-label">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
                        <input type="file" class="form-control" name="file" accept="image/*" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">–ü–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏</label>
                        <input type="number" class="form-control" step="0.01" min="0" max="1" name="confidence"
                               value="{{ confidence or 0.3 }}" required>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" name="show_labels" value="true"
                               id="show_labels" {% if show_labels %}checked{% endif %}>
                        <label class="form-check-label" for="show_labels">
                            –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∏ –≤ –±–æ–∫—Å–∞—Ö
                        </label>
                    </div>
                    <button class="btn btn-primary w-100">üöÄ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å</button>
                </form>
            </div>

            {% if image %}
            <div class="card mt-4 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">–†–µ–∑—É–ª—å—Ç–∞—Ç</h5>
                    <img src="data:image/jpeg;base64,{{ image }}" class="img-fluid border rounded mb-3" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç">

                    <h6>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤:</h6>
                    <ul class="list-group mb-3">
                        {% for label, count in counts.items() %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                {{ label }}
                                <span class="badge bg-primary rounded-pill">{{ count }}</span>
                            </li>
                        {% endfor %}
                    </ul>

                    <h6>–î–µ—Ç–∞–ª–∏:</h6>
                    <ul class="list-group">
                        {% for item in labels %}
                            <li class="list-group-item">
                                <strong>{{ item.label }}</strong> (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {{ item.confidence }})<br>
                                <small>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: {{ item.bbox }}</small>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

</body>
</html>
